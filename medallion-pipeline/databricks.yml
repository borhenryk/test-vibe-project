# Medallion Architecture Pipeline - Databricks Asset Bundle
# This bundle deploys a complete Bronze → Silver → Gold data engineering pipeline

bundle:
  name: medallion_pipeline

variables:
  catalog:
    description: "Unity Catalog name"
    default: "dbdemos_henryk"
  schema:
    description: "Schema name for medallion tables"
    default: "medallion_pipeline"

workspace:
  host: ${var.workspace_host}

include:
  - resources/*.yml

targets:
  dev:
    mode: development
    default: true
    variables:
      workspace_host: "https://dbc-cc0aa83c-12fd.cloud.databricks.com"
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}

  staging:
    mode: development
    variables:
      workspace_host: "https://dbc-cc0aa83c-12fd.cloud.databricks.com"
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}

  prod:
    mode: production
    variables:
      workspace_host: "https://dbc-cc0aa83c-12fd.cloud.databricks.com"
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}
    run_as:
      user_name: ${workspace.current_user.userName}
